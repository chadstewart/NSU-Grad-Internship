@{
  var email = "";
  var password = "";
  var confirmPassword = "";
  var errorMessage = "";
  var db = Database.Open("Login");
  
  if(!IsPost) {
      if(WebSecurity.IsAuthenticated) {
          errorMessage = String.Format("You are already logged in. (User name: {0})", WebSecurity.CurrentUserName);
          }
    }
    
  if(IsPost) {
      WebSecurity.Logout();
      email = Request["email"];
      password = Request["password"];
      confirmPassword = Request["confirmPassword"];
      if(password != confirmPassword) {
          errorMessage = "Passwords don't match.";
          }

      else {
          if(WebSecurity.UserExists(email)) {
              errorMessage = String.Format("User '{0}' already exists.", email);
           }
          else {
              db.Execute("begin transaction;");
              //try{
                  WebSecurity.CreateUserAndAccount(email, password, null, false);                  
                  Roles.AddUserToRole(email, "Student");
                  //errorMessage = String.Format("{0} created.", email);
                  var userid = db.Execute("Select UserID from users where email = @0",email);
                  db.Execute("UPDATE users SET FullName = @0 WHERE Email = @1;",Request["name"],email);
                  if(Request["phonenumber"] != null){
                      db.Execute("UPDATE users SET PhoneNumber = @0 WHERE Email = @1;",Request["phonenumber"],email);
                  }
                  db.Execute("INSERT into student (Major, NSUID) VALUES (@0, @1);",Request["major"],Request["nsuid"]);
                  db.Execute("INSERT into agency (AgencyName, AgencyAddress, AgencyWebsite, AgencyPhoneNumber) VALUES (@0, @1, @2, @3);",Request["agencyname"],Request["agencyaddress"],Request["agencywebsite"],Request["agencyphonenumber"]);
                  db.Execute("INSERT into supervisor (SupervisorName, SupervisorPhoneNumber, SupervisorEmail, SupervisorRole) VALUES (@0, @1, @2, 'Agency');",Request["supervisorname"],Request["supervisorphonenumber"],Request["supervisoremail"]);
                  db.Execute("INSERT into internship (InternshipStatus, JobDescription, OfferLetterLink) VALUES ('pending', @0, 'test');",Request["jobdescription"]);
                  db.Execute("UPDATE student SET student.UserID = t2.UserID FROM users t2 WHERE t2.email = @0 AND student.NSUID = @1;",Request["email"],Request["nsuid"]);
                  db.Execute("UPDATE student SET student.InternshipID = t2.InternshipID FROM internship t2 WHERE t2.jobdescription = @0 AND student.NSUID = @1;",Request["jobdescription"],Request["nsuid"]);
                  db.Execute("UPDATE supervisor SET supervisor.AgencyID = t2.AgencyID FROM agency t2 WHERE t2.agencyname = @0 AND supervisor.SupervisorName = @1;",Request["agencyname"],Request["supervisorname"]);
                  db.Execute("UPDATE internship SET internship.NSUID = t2.NSUID FROM student t2 WHERE t2.NSUID = @0 AND internship.jobdescription = @1;",Request["NSUID"],Request["jobdescription"]);
                  db.Execute("UPDATE internship SET internship.AgencyID = t2.AgencyID FROM agency t2 WHERE t2.agencyname = @0 AND internship.jobdescription = @1;",Request["agencyname"],Request["jobdescription"]);
                  db.Execute("UPDATE internship SET internship.AgencySupervisorID = t2.SupervisorID FROM supervisor t2 WHERE t2.supervisorname = @0 AND internship.jobdescription = @1;",Request["supervisorname"],Request["jobdescription"]);
                  db.Execute("commit;");
                  Response.Redirect("index.cshtml");
               /* } catch (Exception ex){
                    db.Execute("rollback;");
                    var deleteUser = db.Execute("Select UserID From users Where Email = @0",email);
                    db.Execute("Delete From users Where UserID = @0",deleteUser);
                    db.Execute("Delete From webpages_Membership Where UserID = @0",deleteUser);
                    errorMessage = String.Format("Unable to complete registration.");
                }*/
                db.Close();
            }
        }
    }
}

<!DOCTYPE html>

<html lang="en-US">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta id="request-method" name="request-method" content="GET">
    <meta name="author" content="Nicky">
    <meta name="keywords" content="Nicky">
    <link rel="shortcut icon" href="../images/only-nsu.png" type="image/png" />
    <title>Shark Internship Portal</title>
    <link rel="stylesheet" type="text/css" href="../styles/bootstrap.css" />
    <link href="../styles/fileinput.min.css" media="all" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../styles/register.css" />
    <script src="../js/jquery-1.10.2.js"></script>
    <script src="../js/bootstrap.min.js"></script>
    <script src="../js/fileinput.min.js"></script>
</head>
<body>
    <header id="header" class="container">
        <div class="row">
            <div class="col-md-3 col-md-offset-1 col-sm-4 col-sm-offset-0" id="logo"><a href="http://www.nova.edu/" target="_blank"><img src="../images/logo.png" width="239" height="61" alt="Nova Southeastern University"></a></div>
            <div class="col-md-4 col-md-offset-2 col-sm-5 col-sm-offset-1">
                <h3 class="nsu-title">Shark Internship Portal</h3>
            </div>
        </div>
    </header>
    <div class="well">

        <div class="row">
            <div class="col-lg-3 col-md-3 col-sm-4 col-xs-10 col-lg-offset-1 col-md-offset-1 col-sm-offset-0 col-xs-offset-1  panel panel-primary menu-panel">
                <div class="panel-body">
                    <ul class="nav nav-pills nav-stacked filter wow bounceIn" data-wow-delay="500ms">
                        <li class="active"><a data-toggle="pill" href="#register-Form">Registration Form</a></li>
                        <li><a data-toggle="pill" href="#purpose">Purpose</a></li>
                        <li><a data-toggle="pill" href="#responsibilities">Responsibilities</a></li>
                        <li><a data-toggle="pill" href="#labor-Internship-Law">Labor Internship Law</a></li>
                        <li><a data-toggle="pill" href="#responsibilities-of-NSU">Responsibilities of NSU</a></li>
                        <li><a data-toggle="pill" href="#responsibilities-of-Supervisor">Responsibilities of Supervisor</a></li>
                        <li><a data-toggle="pill" href="#terms-of-Internship">Terms of Internship</a></li>
                        <li><a href="index.cshtml">Back to Login</a></li>
                    </ul>
                </div>
            </div>

            <div class="tab-content  col-lg-6 col-md-6 col-sm-7 col-sm-offset-1 col-xs-12 col-md-offset-1 col-lg-offset-1">
                <!-- Registration Form content -->
                <div id="register-Form" class="tab-pane fade in active panel panel-primary">
                    <div class="panel-heading">
                        Please fill in the following internship information. <span style="font-weight:500;">(All fields are mandatory.)</span>
                    </div>
                    <div class="panel-body">
                        <form method="post" role="form" class="form-horizontal register-form"><div class="form-group">
                                <label class="control-label col-sm-4" for="name">Name:</label>
                                <div class="col-sm-7">
                                    <input type="text" name="name" id="name" class="form-control">
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="control-label col-sm-4" for="NsuId">NSU ID:</label>
                                <div class="col-sm-7">
                                    <input type="text" name="nsuid" id="NsuId" class="form-control">
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="control-label col-sm-4" for="password">Password:</label>
                                <div class="col-sm-7">
                                    <input type="password" name="password" id="password" class="form-control">
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="control-label col-sm-4" for="password">Confirm Password:</label>
                                <div class="col-sm-7">
                                    <input type="password" name="confirmPassword" id="password" class="form-control">
                                </div>
                            </div>


                            <div class="form-group">
                                <label class="control-label col-sm-4" for="phoneNo">Phone Number:</label>
                                <div class="col-sm-7">
                                    <input type="text" name="phonenumber" id="phoneNo" class="form-control" >
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="control-label col-sm-4" for="email">Email:</label>
                                <div class="col-sm-7">
                                    <div class="input-group">
                                        <input type="text" name="email" id="email" class="form-control" >
                                        <span class="input-group-addon" id="enmail-addon">@@nova.edu</span>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="control-label col-sm-4" for="term">Term for the internship:</label>
                                <div class="col-sm-6">
                                    <label class="radio-inline checked">
                                        <input type="radio" name="term" value="Fall" checked>
                                        Fall
                                    </label>
                                    <label class="radio-inline">
                                        <input type="radio" name="term" value="Winter">
                                        Winter
                                    </label>
                                    <label class="radio-inline">
                                        <input type="radio" name="term" value="Summer">
                                        Summer
                                    </label>
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="control-label col-sm-4" for="major">Your Major:</label>
                                <div class="col-sm-7">
                                    <input type="text" name="major" id="major" class="form-control" >
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="control-label col-sm-4" for="agencyName">Name of agency for internship:</label>
                                <div class="col-sm-7">
                                    <input type="text" name="agencyname" id="agencyName" class="form-control" >
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="control-label col-sm-4" for="agencyAddress">Agency Address:</label>
                                <div class="col-sm-7">
                                    <input type="text" name="agencyaddress" id="agencyAddress" class="form-control" >
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="control-label col-sm-4" for="agencyWebsite">Agency Website:</label>
                                <div class="col-sm-7">
                                    <input type="text" name="agencywebsite" id="agencyWebsite" class="form-control" >
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="control-label col-sm-4" for="agencyWebsite">Agency Phone Number:</label>
                                <div class="col-sm-7">
                                    <input type="text" name="agencyphonenumber" id="agencyWebsite" class="form-control" >
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="control-label col-sm-4" for="supervisorName">Name of Supervisor:</label>
                                <div class="col-sm-7">
                                    <input type="text" name="supervisorname" id="supervisorName" class="form-control" >
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="control-label col-sm-4" for="supervisorPhoneNo">Supervisor phone number:</label>
                                <div class="col-sm-7">
                                    <input type="text" name="supervisorphonenumber" id="supervisorPhoneNo" class="form-control" >
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="control-label col-sm-4" for="supervisorEmail">Supervisor email:</label>
                                <div class="col-sm-7">
                                    <input type="text" name="supervisoremail" id="supervisorEmail" class="form-control" >
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="control-label col-sm-4" for="offerLetter">Offer Letter Upload (PDF or Scanned Image ONLY):</label>
                                <div class="col-sm-7">
                                    <input id="offerLetter" name="offerletter" multiple type="file" class="file file-loading" data-allowed-file-extensions='["pdf", "jpg", "png", "gif"]' data-show-upload="false" data-max-file-count="1" >
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="control-label col-sm-4" for="jobDescription">Job Description:</label>
                                <div class="col-sm-7">
                                    <textarea id="element_12" name="jobdescription" class="element textarea medium"></textarea>
                                </div>
                            </div>                            
                 <input type="submit" value="Submit" />
        </form>
                    </div>
                </div>

                <!-- Purpose content -->
                <div id="purpose" class="tab-pane fade panel panel-primary">
                    <div class="panel-heading">
                        Purpose
                    </div>
                    <div class="panel-body">
                        <p>
                            Nova Southeastern UniversityÃ¢â‚¬â„¢s (NSU) College of Engineering Internship Program provides an educational strategy whereby students complement their academic preparation with direct practical experience.
                            The effort to combine a productive work experience with an intentional learning component is
                            a proven method for promoting the academic, personal, and career development of students.
                            Your participation exhibits your interest and commitment to this educational strategy and to the growth and development
                            of students as future professionals. We look forward to collaborating with you in this work/learning endeavor.
                        </p>
                    </div>
                </div>

                <!-- Responsibilities content -->
                <div id="responsibilities" class="tab-pane fade panel panel-primary">
                    <div class="panel-heading">
                        Responsibilities
                    </div>
                    <div class="panel-body">
                        <p>
                            To help ensure the interests and promote the benefits of an internship arrangement for all parties involved,
                            NSU has developed this agreement of understanding to describe the mutual responsibilities between NSU and your
                            organization.
                        </p>
                    </div>
                </div>

                <!-- Labor Internship Law content -->
                <div id="labor-Internship-Law" class="tab-pane fade panel panel-primary">
                    <div class="panel-heading">
                        Department of Labor Internship Law
                    </div>
                    <div class="panel-body">
                            The internship is considered educational training and an integral part of the studentÃ¢â‚¬â„¢s curriculum.
                            A Nova Southeastern University undergraduate or graduate business student who participates in the Internship Program is
                            <i> not considered to be employed </i> at a formal job, but rather is temporarily hired for the strict purpose of an
                            internship. According to the U.S. Dept. of Labor, Wage and Hour Division, Ã¢â‚¬Å“If an employer uses inters as substitutes
                            for regular workers or to augment its existing workforce during specific time periods, these interns should be paid
                            at least the minimum wage.

                            <br />
                            <br />
                            <a href="http://www.dol.gov/whd/regs/compliance/whdfs71.htm">http://www.dol.gov/whd/regs/compliance/whdfs71.htm</a>
                            <br />
                            <br />
                            <b>The following are criteria for unpaid internship according to Department of Labor:</b>
                            <ul>
                                <li>
                                    The internship, even though it includes actual operation of the facilities of the employer
                                    , is similar to training which would be given in an educational environment
                                </li>
                                <li>
                                    The internship experience is for the benefit of the intern;
                                </li>
                                <li>
                                    The intern does not displace regular employees, but works under close supervision of existing staff;
                                </li>
                                <li>
                                    The employer that provides the training derives no immediate advantage from the activities of the intern;
                                    and on occasion its operations may actually be impeded;
                                </li>
                                <li>
                                    The intern is not necessarily entitled to a job at the conclusion of the internship
                                </li>
                                <li>
                                    The employer and the intern understand that the intern is not entitled to wages for the time spent
                                    in the internship.
                                </li>
                            </ul>
                            If all of the factors listed above are met, an employment relationship does not exist under the FLSA,
                            and the ActÃ¢â‚¬â„¢s minimum wage and overtime provisions do not apply to the intern.
                            This exclusion from the definition of employment is necessarily quite narrow because the FLSAÃ¢â‚¬â„¢s definition of Ã¢â‚¬Å“employÃ¢â‚¬Â
                            is very broad.  Some of the most commonly discussed factors for Ã¢â‚¬Å“for-profitÃ¢â‚¬Â private sector internship programs are
                            considered below.
                    </div>
                </div>

                <!-- Responsibilities of NSU content -->
                <div id="responsibilities-of-NSU" class="tab-pane fade panel panel-primary">
                    <div class="panel-heading">
                        Responsibilities of Nova Southeastern University
                    </div>
                    <div class="panel-body">
                            <ol>
                                <li>
                                    Encourage the student's productive contribution to the overall mission of the organization.
                                </li>
                                <li>
                                    Certify the student's academic eligibility to participate in an internship assignment
                                </li>
                                <li>
                                    Provide student with responsibilities, assist in  setting learning objectives, confer with Site
                                    Supervisor Personnel, monitor the progress of the internship assignment, and monitor the overall performance
                                    of the student at site.
                                </li>
                                <li>
                                    Maintain communication with the Site Supervisor and clarify NSU policies and procedures.
                                </li>
                                <li>
                                    Maintain the confidentiality of any information designated by the Site Supervisor as confidential
                                    related to the internship.
                                </li>
                                <li>
                                    Uphold any additional policies and procedures that are mutually agreed upon in advance in writing
                                    between NSU and the Site Supervisor.
                                </li>
                            </ol>
                    </div>
                </div>

                <!-- Responsibilities of Supervisor content -->
                <div id="responsibilities-of-Supervisor" class="tab-pane fade panel panel-primary">
                    <div class="panel-heading">
                        Responsibilities of the Site Supervisor
                    </div>
                    <div class="panel-body">
                            <ol>
                                <li>
                                    Encourage and support the learning objectives of the student's internship experience.
                                </li>
                                <li>
                                    Designate an employee to serve as student supervisor with responsibilities to help orient
                                    the student to the site and its culture, assist in the development of learning objectives, confer
                                    regularly with the student and his/her instructor, and to monitor progress of the student.
                                </li>
                                <li>
                                    Provide adequate supervision to the student and assign duties that are career-related, developmental,
                                    progressive and challenging.
                                </li>
                                <li>
                                    Make available equipment, supplies, and space necessary for the student to perform his/her duties.
                                </li>
                                <li>
                                    Provide a safe working environment.
                                </li>
                                <li>
                                    Will not displace regular workers with students secured through internship referral.
                                </li>
                                <li>
                                    Notify NSU personnel of any changes in the student's work status, schedule, or performance.
                                </li>
                                <li>
                                    Maintain general liability, professional liability and workerÃ¢â‚¬â„¢s compensation insurance as required by law.
                                </li>
                                <li>
                                    Internship supervisor must fill out midterm and final evaluation provided by the program instructor
                                </li>
                            </ol>
                    </div>
                </div>

                <!-- Terms of Internship content -->
                <div id="terms-of-Internship" class="tab-pane fade panel panel-primary">
                    <div class="panel-heading">
                        Terms of Internship Arrangement
                    </div>
                    <div class="panel-body">
                        <p>
                            An internship arrangement for each student will be a period agreed upon by the Site Sponsor and the University.
                            Should the Site Supervisor become dissatisfied with the performance of a student, the Site Supervisor may request
                            termination of the internship arrangement. This should occur only after University personnel have been notified in
                            advance and a satisfactory resolution cannot be obtained. Conversely, NSU may request termination of the arrangement
                            for any student not complying with NSU guidelines and procedures for the internship program, or if the Site Supervisor
                            does not uphold the responsibilities mentioned above, as long as Site Supervisor personnel have been notified in
                            advance and satisfactory resolution cannot be obtained.
                        </p>
                    </div>
                </div>
            </div>

        </div>
    </div>
    <div id="footer">
        <p>Â©2016 Nova Southeastern University <span>|</span> 3301 College Avenue, Fort Lauderdale, Florida 33314-7796 <span>|</span> 800-541-6682</p>
    </div>
</body>
</html>